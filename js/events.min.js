let allEvents=[];let currentPage=1;const EVENTS_PER_PAGE=6;document.addEventListener("DOMContentLoaded",()=>{loadEvents();initOrganizeForm()});async function loadEvents(){const container=document.getElementById("events-container");try{const res=await fetch("data/events.json");if(!res.ok)throw new Error("Failed to load events");allEvents=await res.json();setupCountdown(allEvents);renderPage(1)}catch(error){console.error(error);container.innerHTML=`<p class="error-msg">Unable to load events ðŸ˜¢</p>`}}function renderPage(page){const container=document.getElementById("events-container");container.innerHTML="";const start=(page-1)*EVENTS_PER_PAGE;const end=start+EVENTS_PER_PAGE;const eventsToShow=allEvents.slice(start,end);if(eventsToShow.length===0){container.innerHTML="<p>No events to show.</p>";return}const now=new Date;const upcoming=allEvents.filter(e=>new Date(e.date)>now).sort((a,b)=>new Date(a.date)-new Date(b.date))[0];eventsToShow.forEach(event=>{const card=document.createElement("div");card.classList.add("event-card");const isNext=upcoming&&event===upcoming;if(isNext)card.style.borderColor="var(--accent-color)";card.innerHTML=`
            ${isNext?'<div style="color:var(--accent-color); font-weight:bold; font-size:0.8rem; margin-bottom:5px;">ðŸ”¥ UP NEXT</div>':""}
            <h2>${event.title}</h2>
            <p class="event-date"><i class="fa-solid fa-calendar"></i> ${event.date}</p>
            <p class="event-location"><i class="fa-solid fa-location-dot"></i> ${event.location}</p>
            <p class="event-description">${event.description}</p>
            <a href="${event.link}" class="btn-event">Learn More</a>
        `;container.appendChild(card)});renderPaginationControls(page)}function renderPaginationControls(page){const container=document.getElementById("pagination-controls");const totalPages=Math.ceil(allEvents.length/EVENTS_PER_PAGE);if(totalPages<=1){container.innerHTML="";return}container.innerHTML=`
        <button class="pagination-btn" ${page===1?"disabled":""} onclick="changePage(${page-1})">
            <i class="fas fa-chevron-left"></i> Prev
        </button>
        <span class="page-info">Page ${page} of ${totalPages}</span>
        <button class="pagination-btn" ${page===totalPages?"disabled":""} onclick="changePage(${page+1})">
            Next <i class="fas fa-chevron-right"></i>
        </button>
    `}window.changePage=function(newPage){currentPage=newPage;renderPage(newPage);document.querySelector(".events-container").scrollIntoView({behavior:"smooth"})};function setupCountdown(events){const now=new Date;const upcomingEvents=events.filter(e=>new Date(e.date)>now).sort((a,b)=>new Date(a.date)-new Date(b.date));if(upcomingEvents.length>0){initCountdownTimer(upcomingEvents[0])}}function initCountdownTimer(event){const section=document.getElementById("countdown-section");const nameEl=document.getElementById("next-event-name");if(!section||!nameEl)return;const targetDate=new Date(event.date).getTime();section.classList.remove("countdown-hidden");nameEl.innerHTML=`Counting down to: <span style="color:var(--accent-color)">${event.title}</span>`;const updateTimer=()=>{const now=(new Date).getTime();const distance=targetDate-now;if(distance<0){section.innerHTML="<h3>The Event Has Started! ðŸš€</h3>";return}const days=Math.floor(distance/(1e3*60*60*24));const hours=Math.floor(distance%(1e3*60*60*24)/(1e3*60*60));const minutes=Math.floor(distance%(1e3*60*60)/(1e3*60));const seconds=Math.floor(distance%(1e3*60)/1e3);document.getElementById("days").innerText=String(days).padStart(2,"0");document.getElementById("hours").innerText=String(hours).padStart(2,"0");document.getElementById("minutes").innerText=String(minutes).padStart(2,"0");document.getElementById("seconds").innerText=String(seconds).padStart(2,"0")};setInterval(updateTimer,1e3);updateTimer()}function initOrganizeForm(){const form=document.getElementById("organize-form");const feedback=document.getElementById("organize-feedback");if(form){form.addEventListener("submit",e=>{e.preventDefault();const btn=form.querySelector("button");const originalText=btn.innerText;btn.disabled=true;btn.innerText="Submitting...";setTimeout(()=>{btn.disabled=false;btn.innerText=originalText;feedback.textContent="âœ… Proposal submitted successfully! We'll review it soon.";feedback.style.color="#00c853";form.reset();setTimeout(()=>{feedback.textContent=""},5e3)},1500)})}}